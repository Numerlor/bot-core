# Changelog

## 7.1.0 24th May 2022
- Feature: Bump Discord.py to [`4cbe8f5`](https://github.com/Rapptz/discord.py/tree/4cbe8f58e16f6a76371ce45a69e0832130d6d24f)
   - This fixes a bug with permission resolution when dealing with timed out members.

## 7.0.0 10th May 2022
- Fix: Capture all characters up to a whitespace in the Discord Invite regex.
- Breaking: Discord invite regex no longer returns a URL safe result, refer to documentation for safely handling it.

## 6.4.0 26th April 2022
- Feature: Bump discord.py to `[5a06fa5](https://github.com/Rapptz/discord.py/tree/5a06fa5f3e28d2b7191722e1a84c541560008aea)`
    - Notably, one of the commits in this bump dynamically extends the timeout of `Guild.chunk()` based on the number or members, so it should actually work on our guild now.

## 6.3.2 25th April 2022
- Fix: Actually use `statsd_url` when it gets passed to `BotBase`.

## 6.3.1 21st April 2022
- Fix: Correct version number in pyproject.toml

## 6.3.0 21st April 2022
- Feature: Don't load modules starting with `_`

## 6.2.0 21st April 2022
- Feature: Load each cog in it's own task to avoid a single cog crashing entire load process.

## 6.1.0 20th April 2022
- Feature: Add `unqualify` to the `botcore.utils` namespace for use in bots that manipulate extensions

## 6.0.0 19th April 2022
- Breaking: Bump discord.py to [987235d5649e7c2b1a927637bab6547244ecb2cf](https://github.com/Rapptz/discord.py/tree/987235d5649e7c2b1a927637bab6547244ecb2cf)
    - This reverts a change to help command behaviour that broke our custom pagination
    - This also adds basic forum channel support to discord.py

## 5.0.4 18th April 2022
- Feature: Allow passing an `api_client` to `BotBase`.`__init__` to specify the `botcore.site_api.APIClient` instance to use.

## 5.0.3 18th April 2022
- Fix: Reconnect to redis session on setup if it is closed.

## 5.0.2 5th April 2022
- Fix: Create a dummy `AsyncstatsdClient` before connecting to real url, in case a connection cannot be made on init.
- Fix: Move the creation of the `asyncio.Event`, `BotBase._guild_available` to within the setup hook, to avoid a deprecation notice.

## 5.0.1 2nd April 2022
- Fix: Move creation of BotBase's `aiohttp.AsyncResolver` to the async setup hook, to avoid deprecation notice

## 5.0.0 2nd April 2022
- Breaking: Remove public extensions util
- Feature: Add `BotBase`, a `discord.ext.commands.Bot` sub-class, which abstracts a lot of logic shared between our bots
- Feature: Add async statsd client
- Dependencies: Bump Discord.py to latest alpha commit

## 4.0.0 14th March 2022
- Breaking: Migrate back to Discord.py 2.0

## 3.0.1 5th March 2022
- Fix: Setup log tracing when `botcore.utils.logging` is imported so that it can be used within botcore functions.

## 3.0.0 3rd March 2022
 - Breaking: Move `apply_monkey_patches()` directly to `botcore.utils` namespace

## 2.1.0 24th February 2022
 - Feature: Port the Site API wrapper from the bot repo.

## 2.0.0 22nd February 2022
- Breaking: Moved regex to `botcore.utils` namespace
- Feature: Migrate from discord.py 2.0a0 to disnake.
- Feature: Add common monkey patches.
- Feature: Port many common utilities from our bots
    - caching
    - channel
    - extensions
    - loggers
    - members
    - scheduling
- Support: Added intersphinx to docs.

## 1.2.0 9th January 2022
- Feature: Add code block detection regex.

## 1.1.0 2nd December 2021
- Support: Add autogenerated docs.
- Feature: Add a regex utility.


## 1.0.0 17th November 2021
- Support: Add the core package, poetry, and linting CI.
